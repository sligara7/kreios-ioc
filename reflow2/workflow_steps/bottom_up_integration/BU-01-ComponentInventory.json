{
  "workflow_metadata": {
    "version": "1.0.0",
    "name": "BU-01 Component Inventory & Discovery",
    "based_on": "Bottom-up integration workflow - LESSON-01",
    "description": "Catalog all existing components for bottom-up integration, analyzing capabilities, interfaces, and constraints"
  },
  "entry_conditions": {
    "from": "00-setup with from_existing_components entry point",
    "prerequisites": [
      "List of existing components (packages, services, systems) to integrate",
      "High-level integration goal",
      "context/working_memory.json",
      "context/step_progress_tracker.json"
    ]
  },
  "steps": [
    {
      "id": "BU-01.1",
      "name": "Gather Component List",
      "description": "Collect list of all components to be integrated (Python packages, microservices, legacy systems, etc.)",
      "tool": "manual",
      "inputs": [
        "User-provided list of components",
        "Component locations (GitHub repos, filesystem paths, package registries)"
      ],
      "outputs": [
        "Initial component list with IDs and names"
      ]
    },
    {
      "id": "BU-01.2",
      "name": "Classify Components by Tier",
      "description": "Determine hierarchical tier for each component (tier_0=SoS, tier_1=systems, tier_2=services, tier_3=components, tier_4=modules)",
      "tool": "manual",
      "guidance": [
        "Tier 0: System of systems (e.g., 'E-commerce Platform')",
        "Tier 1: Independent systems (e.g., 'Payment System')",
        "Tier 2: Services within systems (e.g., 'payment_processor')",
        "Tier 3: Components/packages (e.g., 'stripe_adapter', 'auth_library')",
        "Tier 4: Modules/classes (e.g., 'oauth_handler', 'session_manager')"
      ],
      "outputs": [
        "Tier classification for each component"
      ]
    },
    {
      "id": "BU-01.3",
      "name": "Analyze Component Capabilities",
      "description": "For each component, identify what capabilities it provides (authentication, data storage, API gateway, etc.)",
      "tool": "manual | llm_analysis",
      "analysis_methods": [
        "Read component documentation (README, API docs)",
        "Analyze source code (if available)",
        "Review package metadata (setup.py, package.json, pom.xml)",
        "Examine existing deployments"
      ],
      "outputs": [
        "Capabilities list for each component"
      ]
    },
    {
      "id": "BU-01.4",
      "name": "Extract Exposed Interfaces",
      "description": "Identify all interfaces each component exposes (REST APIs, gRPC, Python functions, message queues, etc.)",
      "tool": "manual | llm_analysis",
      "interface_types": [
        "python_api: Python function/class APIs",
        "rest_api: HTTP endpoints",
        "grpc_api: gRPC services",
        "message_queue: Kafka/RabbitMQ topics",
        "database: Database connections",
        "file_system: File-based interfaces",
        "cli: Command-line interfaces"
      ],
      "analysis_methods": [
        "Parse OpenAPI/Swagger specs",
        "Analyze source code for @app.route, @api, @endpoint decorators",
        "Review interface documentation",
        "Scan for function definitions in Python modules"
      ],
      "outputs": [
        "Interface definitions for each component"
      ]
    },
    {
      "id": "BU-01.5",
      "name": "Identify Dependencies",
      "description": "Catalog runtime, dev, and system dependencies for each component",
      "tool": "manual | llm_analysis",
      "dependency_sources": [
        "requirements.txt, setup.py (Python)",
        "package.json (Node.js)",
        "pom.xml, build.gradle (Java)",
        "go.mod (Go)",
        "Cargo.toml (Rust)"
      ],
      "outputs": [
        "Dependency lists (runtime, dev, system) for each component"
      ]
    },
    {
      "id": "BU-01.6",
      "name": "Assess Integration Readiness",
      "description": "Evaluate each component's readiness for integration (API stability, documentation quality, test coverage, observability)",
      "tool": "manual",
      "readiness_criteria": [
        "API stability: stable | evolving | unstable",
        "Documentation quality: excellent | good | fair | poor | none",
        "Test coverage: â‰¥80% | <80% | unknown",
        "Observability: logging + metrics + tracing",
        "Maintenance status: actively_maintained | maintenance_mode | deprecated"
      ],
      "outputs": [
        "Integration readiness assessment for each component"
      ]
    },
    {
      "id": "BU-01.7",
      "name": "Create component_inventory.json",
      "description": "Generate complete component inventory using template",
      "tool": "manual",
      "template": "{reflow_root}/templates/component_inventory_template.json",
      "output_path": "{system_root}/specs/machine/component_inventory.json",
      "required_fields": [
        "component_id",
        "component_name",
        "component_type",
        "tier_classification",
        "capabilities",
        "exposed_interfaces",
        "dependencies",
        "constraints",
        "integration_readiness",
        "analysis_confidence"
      ]
    },
    {
      "id": "BU-01.8",
      "name": "Generate Component Inventory Summary",
      "description": "Create human-readable summary of component inventory",
      "tool": "manual",
      "output_path": "{system_root}/docs/COMPONENT_INVENTORY_SUMMARY.md",
      "includes": [
        "Total components by tier",
        "Total components by type",
        "Integration readiness summary",
        "High-risk components (low readiness, deprecated, unmaintained)",
        "External dependencies summary"
      ]
    }
  ],
  "validation": {
    "checks": [
      "All components have tier classification",
      "All components have at least one capability identified",
      "All components have exposed_interfaces analyzed (may be empty for leaf components)",
      "component_inventory.json validates against template schema",
      "Summary generated with accurate counts"
    ]
  },
  "artifact_routing": {
    "component_inventory": "{system_root}/specs/machine/component_inventory.json",
    "inventory_summary": "{system_root}/docs/COMPONENT_INVENTORY_SUMMARY.md"
  },
  "iteration_paths": {
    "on_missing_information": "self (iterate on components with low analysis_confidence)",
    "on_validation_failure": "self (fix inventory issues)"
  },
  "handoff": {
    "produces": [
      "specs/machine/component_inventory.json",
      "docs/COMPONENT_INVENTORY_SUMMARY.md"
    ],
    "next_workflow": "BU-02-IntegrationRequirements.json"
  },
  "llm_agent_guidance": {
    "critical_reminders": [
      "Catalog ALL components user provides, do not skip any",
      "Tier classification is critical - incorrect tier causes integration issues",
      "For Python packages: analyze __init__.py, main modules to identify exposed interfaces",
      "For microservices: check for OpenAPI specs, health endpoints, README",
      "Set analysis_confidence honestly - 'low' means needs deeper analysis later",
      "Integration readiness affects prioritization in later steps"
    ],
    "common_mistakes": [
      "Skipping dependency analysis (causes version conflicts later)",
      "Not identifying all exposed interfaces (causes missing integration points)",
      "Incorrect tier classification (tier_3 component classified as tier_2 service)",
      "Overstating analysis_confidence without thorough review",
      "Forgetting to analyze external dependencies (third-party APIs, cloud services)"
    ]
  }
}
