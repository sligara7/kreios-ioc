{
  "workflow_metadata": {
    "version": "0.1.0",
    "name": "FU-02 Architecture Re-Engineering & Decomposition",
    "based_on": "feature_update_workflow.json P2",
    "description": "Apply relevant architecture steps to update specs and validate deltas."
  },
  "entry_conditions": {
    "from": "FU-01 or decision D2 during development",
    "artifacts": ["specs/human/feature/change_proposal.md", "specs/human/feature/impact_analysis.md"],
    "context_refresh": true
  },
  "steps": [
    { "id": "P2.1", "description": "Decompose new/updated service/system using templates", "tool": "manual" },
    { "id": "P2.2", "description": "Update or create service_architecture.json for changed services", "tool": "manual", "output": "specs/machine/service_arch/<service>/service_architecture.json" },
    { "id": "P2.3", "description": "Deduce/validate interfaces (ICDs) and update contracts", "tool": "manual", "outputs": ["specs/machine/interfaces/*", "specs/machine/service_arch/<service>/api_contracts.json"] },
    { "id": "P2.4", "description": "Update system graph and validate", "tool": "bash", "output": "specs/machine/graphs/system_of_systems_graph.json" },
    { "id": "P2.5", "description": "Update index.json and build_ready_index.json", "tool": "manual", "outputs": ["specs/machine/index.json", "specs/machine/build_ready_index.json"] }
  ],
  "artifact_routing": {
    "machine": "specs/machine/*",
    "human": "specs/human/*"
  },
  "iteration_paths": {
    "on_validation_failure": "../architecture/Arch-05-ConsistencyAndSpecVerification.json",
    "on_scope_change": "../feature_update/FU-01-ChangeProposal.json"
  },
  "handoff": {
    "produces": ["updated specs under specs/machine", "graphs/system_of_systems_graph.json", "interfaces/*", "build_ready_index.json"],
    "next_workflow": "../feature_update/FU-03-DeltaAndApproval.json"
  }
}
