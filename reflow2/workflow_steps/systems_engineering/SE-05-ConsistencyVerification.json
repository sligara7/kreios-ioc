{
  "workflow_metadata": {
    "version": "0.1.0",
    "name": "Arch-05 Consistency and Specification Verification",
    "based_on": "architecture_workflow.json step 6â€“7",
    "description": "Validate architectural consistency and verify water-tight specifications for independent development."
  },
  "entry_conditions": {
    "from": "Arch-04",
    "artifacts": [
      "specs/machine/index.json",
      "specs/machine/service_arch/<service>/service_architecture.json",
      "specs/machine/interfaces/* (or system-level interfaces)",
      "specs/machine/graphs/system_of_systems_graph.json"
    ]
  },
  "steps": [
    {
      "id": "S6.1",
      "name": "Template Validation",
      "tool": "/home/ajs7/project/saa/tools/validate_architecture.py",
      "command": "python3 /home/ajs7/project/saa/tools/validate_architecture.py systems/<system_name>",
      "success": "All service_architecture files pass"
    },
    {
      "id": "S6.2",
      "name": "Graph Consistency Validation",
      "tool": "/home/ajs7/project/saa/tools/system_of_systems_graph.py",
      "command": "python3 /home/ajs7/project/saa/tools/system_of_systems_graph.py systems/<system_name> --format json --output systems/<system_name>/specs/machine/graphs/system_of_systems_graph.json",
      "output": "specs/machine/graphs/system_of_systems_graph.json"
    },
    {
      "id": "S6.3",
      "name": "Resolve Architectural Issues",
      "tool": "manual",
      "iterative": true,
      "guidance": "Fix cycles, missing interfaces, orphans; update affected service_architecture.json and ICDs"
    },
    {
      "id": "S6.4",
      "name": "Integration Readiness Validation",
      "tool": "manual",
      "checks": [
        "Dependencies resolvable",
        "Interfaces implemented or specified",
        "External systems flagged",
        "ICDs complete"
      ]
    },
    {
      "id": "S6.5",
      "name": "Index Management Validation",
      "tool": "manual",
      "guidance": "Ensure index.json maps to specs/machine/service_arch/<service> canonical paths"
    },
    {
      "id": "S7",
      "name": "Water-Tight Specification Verification",
      "tool": "manual",
      "checks": [
        "Service SRD completeness",
        "Validated ICDs",
        "Dependencies specified",
        "Security/performance/compliance requirements documented"
      ]
    }
  ],
  "iteration_paths": {
    "on_template_violation": "../architecture/Arch-03-ConstraintsAndTemplateValidation.json",
    "on_graph_issue": "../architecture/Arch-02-AnalysisAndDecomposition.json",
    "on_missing_interface": "../architecture/Arch-02-AnalysisAndDecomposition.json",
    "on_deployment_mismatch": "../architecture/Arch-04-DeploymentAndDeepDive.json"
  },
  "artifact_routing": {
    "index_json": "specs/machine/index.json",
    "graph": "specs/machine/graphs/system_of_systems_graph.json",
    "icds": "specs/machine/interfaces/",
    "human_reports": "specs/human/reports/"
  },
  "validation": {
    "check": "All validation checkpoints pass; specs water-tight",
    "on_failure": "Follow iteration_paths"
  },
  "handoff": {
    "produces": [
      "specs/machine/index.json",
      "specs/machine/graphs/system_of_systems_graph.json",
      "specs/machine/interfaces/*",
      "specs/human/reports/* (if produced)"
    ],
    "next_workflow": "../architecture/Arch-06-ImplArtifactsAndCompletion.json"
  }
}
