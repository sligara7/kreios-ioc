{
  "$schema": "../templates/schemas/workflow_step_registry_schema.json",
  "version": "1.0.0",
  "last_updated": "2025-10-25",
  "description": "Centralized registry of all workflow steps across Reflow workflows with dependency tracking",
  "total_workflows": 6,
  "total_steps": 35,
  "workflows": {
    "00-setup": {
      "workflow_id": "00-setup",
      "name": "Setup Workflow",
      "description": "Initialize system, configure paths, set up environment",
      "step_count": 6,
      "steps": {
        "S-01": {
          "name": "Path Configuration",
          "phase": "initialization",
          "prerequisites": [],
          "produces": ["context/working_memory.json (paths configured)"],
          "required_for": ["S-01A", "S-02", "S-03", "all subsequent workflows"],
          "estimated_duration": "2-5 minutes"
        },
        "S-01A": {
          "name": "Architectural Framework Selection",
          "phase": "initialization",
          "prerequisites": ["S-01"],
          "produces": ["context/working_memory.json (framework_configuration)"],
          "required_for": ["SE-01", "SE-02", "SE-06"],
          "estimated_duration": "1-2 minutes"
        },
        "S-02": {
          "name": "Directory Structure Creation",
          "phase": "initialization",
          "prerequisites": ["S-01"],
          "produces": ["specs/, docs/, context/, services/ directories"],
          "required_for": ["S-03", "all subsequent workflows"],
          "estimated_duration": "1 minute"
        },
        "S-03": {
          "name": "Foundational Documents",
          "phase": "initialization",
          "prerequisites": ["S-01", "S-02"],
          "produces": ["docs/SYSTEM_MISSION_STATEMENT.md", "docs/USER_SCENARIOS.md", "docs/SUCCESS_CRITERIA.md"],
          "required_for": ["SE-01"],
          "estimated_duration": "10-15 minutes"
        },
        "S-04-decision": {
          "name": "System-of-Systems Decision",
          "phase": "decision",
          "prerequisites": ["S-03"],
          "produces": ["decision: single system or multi-system"],
          "required_for": ["S-04 (conditional)"],
          "estimated_duration": "1 minute"
        },
        "S-04": {
          "name": "System-of-Systems Decomposition (Optional)",
          "phase": "initialization",
          "prerequisites": ["S-04-decision (if yes)"],
          "produces": ["system boundary definitions", "integration requirements"],
          "required_for": [],
          "optional": true,
          "estimated_duration": "15-30 minutes"
        }
      }
    },
    "01-systems_engineering": {
      "workflow_id": "01-systems_engineering",
      "name": "Systems Engineering & Architecture Workflow",
      "description": "Design and validate complete system architecture",
      "step_count": 8,
      "steps": {
        "SE-01": {
          "name": "System Analysis & Service Decomposition",
          "phase": "analysis",
          "prerequisites": ["S-03", "framework selection from S-01A"],
          "produces": ["specs/machine/system_decomposition.json"],
          "required_for": ["SE-02"],
          "estimated_duration": "15-30 minutes"
        },
        "SE-02": {
          "name": "Service Architecture Specification",
          "phase": "architecture",
          "prerequisites": ["SE-01"],
          "produces": ["specs/machine/service_arch/**/service_architecture_v*.json", "specs/machine/interfaces/interface_registry.json"],
          "required_for": ["SE-03", "SE-06", "AV-01"],
          "estimated_duration": "30-90 minutes (per service)"
        },
        "SE-03": {
          "name": "Constraints & Template Validation",
          "phase": "validation",
          "prerequisites": ["SE-02"],
          "produces": ["validation reports", "corrected architecture files"],
          "required_for": ["SE-06"],
          "estimated_duration": "10-20 minutes",
          "quality_gate": "G-SE-03: Architecture Validation Gate (BLOCKING)"
        },
        "SE-04": {
          "name": "Deployment Architecture Reconciliation",
          "phase": "architecture",
          "prerequisites": ["SE-02"],
          "produces": ["deployment_architecture.json", "port_registry.json"],
          "required_for": ["SE-06", "TO-02"],
          "estimated_duration": "10-15 minutes",
          "applicable_frameworks": ["uaf"]
        },
        "SE-05": {
          "name": "Consistency & Specification Verification",
          "phase": "verification",
          "prerequisites": ["SE-02", "SE-03"],
          "produces": ["verification report"],
          "required_for": ["SE-06"],
          "estimated_duration": "5-10 minutes"
        },
        "SE-06": {
          "name": "System Graph Generation",
          "phase": "artifacts",
          "prerequisites": ["SE-02", "SE-03"],
          "produces": ["specs/machine/graphs/system_of_systems_graph.json", "architectural_issues.json"],
          "required_for": ["AV-01", "AV-02"],
          "estimated_duration": "5-10 minutes",
          "tools": ["system_of_systems_graph_v2.py"]
        },
        "SE-07": {
          "name": "Architecture Evolution (OPTIONAL)",
          "phase": "evolution",
          "prerequisites": ["SE-06"],
          "produces": ["version_manifest.json updates"],
          "required_for": [],
          "optional": true,
          "estimated_duration": "10-20 minutes"
        },
        "SE-08": {
          "name": "Mixed-Version Validation (OPTIONAL)",
          "phase": "validation",
          "prerequisites": ["SE-07"],
          "produces": ["mixed-version validation report"],
          "required_for": [],
          "optional": true,
          "estimated_duration": "5-10 minutes"
        }
      }
    },
    "02-artifacts_visualization": {
      "workflow_id": "02-artifacts_visualization",
      "name": "Artifacts & Visualization Workflow",
      "description": "Generate ICDs, diagrams, and documentation",
      "step_count": 5,
      "steps": {
        "AV-00-decision": {
          "name": "Development Intent Decision",
          "phase": "decision",
          "prerequisites": ["SE-06"],
          "produces": ["decision: architecture-only or full development"],
          "required_for": ["AV-01", "AV-04 (conditional)"],
          "estimated_duration": "1 minute"
        },
        "AV-01": {
          "name": "Interface Contract Documents (ICDs)",
          "phase": "artifacts",
          "prerequisites": ["SE-06"],
          "produces": ["specs/machine/interfaces/**_icd.json"],
          "required_for": ["D-01 (if development)"],
          "estimated_duration": "15-30 minutes",
          "tools": ["generate_interface_contracts.py"]
        },
        "AV-02": {
          "name": "Mermaid Diagrams & Visualizations",
          "phase": "visualization",
          "prerequisites": ["SE-06"],
          "produces": ["specs/human/visualizations/*.mmd"],
          "required_for": ["AV-03"],
          "estimated_duration": "10-20 minutes",
          "tools": ["generate_mermaid_*.py"]
        },
        "AV-03": {
          "name": "Human-Readable Documentation",
          "phase": "documentation",
          "prerequisites": ["AV-01", "AV-02"],
          "produces": ["specs/human/documentation/*.md"],
          "required_for": [],
          "estimated_duration": "20-40 minutes"
        },
        "AV-04": {
          "name": "Architecture-Only Handoff Package",
          "phase": "handoff",
          "prerequisites": ["AV-00-decision (if architecture-only)", "AV-03"],
          "produces": ["architecture handoff package"],
          "required_for": [],
          "optional": true,
          "estimated_duration": "10-15 minutes"
        }
      }
    },
    "03-development": {
      "workflow_id": "03-development",
      "name": "Development Workflow",
      "description": "Implement services with full testing and observability",
      "step_count": 6,
      "steps": {
        "D-01": {
          "name": "Initialization & Environment Bootstrap",
          "phase": "initialization",
          "prerequisites": ["AV-01"],
          "produces": ["dev environment", "dependencies installed"],
          "required_for": ["D-02"],
          "estimated_duration": "10-20 minutes",
          "tools": ["bootstrap_development_context.py"]
        },
        "D-02": {
          "name": "Core & Domain Model Realization",
          "phase": "implementation",
          "prerequisites": ["D-01"],
          "produces": ["service implementations (core logic)"],
          "required_for": ["D-03"],
          "estimated_duration": "varies (hours to days)"
        },
        "D-03": {
          "name": "Persistence & Migration Enablement",
          "phase": "implementation",
          "prerequisites": ["D-02"],
          "produces": ["database schemas", "migration scripts"],
          "required_for": ["D-04"],
          "estimated_duration": "varies (hours to days)"
        },
        "D-04": {
          "name": "Integration Surfaces & Security Hardening",
          "phase": "implementation",
          "prerequisites": ["D-03"],
          "produces": ["API endpoints", "security implementations"],
          "required_for": ["D-05"],
          "estimated_duration": "varies (hours to days)"
        },
        "D-05": {
          "name": "Observability & Testing Pyramid",
          "phase": "quality",
          "prerequisites": ["D-04"],
          "produces": ["tests (80% coverage)", "observability instrumentation"],
          "required_for": ["TO-01"],
          "estimated_duration": "varies (hours to days)",
          "quality_gate": "G-D-05: Test Coverage ≥80% (BLOCKING)"
        },
        "D-Post": {
          "name": "Feedback Loop Initialization",
          "phase": "feedback",
          "prerequisites": ["D-05"],
          "produces": ["feedback mechanisms"],
          "required_for": [],
          "estimated_duration": "30-60 minutes"
        }
      }
    },
    "04-testing_operations": {
      "workflow_id": "04-testing_operations",
      "name": "Testing & Operations Workflow",
      "description": "CI/CD, deployment, and operational readiness",
      "step_count": 5,
      "steps": {
        "TO-01": {
          "name": "Development Test Execution (DTE)",
          "phase": "testing",
          "prerequisites": ["D-05"],
          "produces": ["test execution reports"],
          "required_for": ["TO-02"],
          "estimated_duration": "varies (minutes to hours)"
        },
        "TO-02": {
          "name": "CI/CD Setup & Automation",
          "phase": "automation",
          "prerequisites": ["TO-01", "SE-04 (port registry)"],
          "produces": ["CI/CD pipeline", "docker-compose.yml"],
          "required_for": ["TO-03"],
          "estimated_duration": "1-2 hours",
          "quality_gate": "G-TO-02: Docker Compose Validation (BLOCKING)"
        },
        "TO-03": {
          "name": "Deployment Validation",
          "phase": "deployment",
          "prerequisites": ["TO-02"],
          "produces": ["deployment validation report"],
          "required_for": ["TO-04"],
          "estimated_duration": "30-60 minutes"
        },
        "TO-04": {
          "name": "Operational Readiness",
          "phase": "operations",
          "prerequisites": ["TO-03"],
          "produces": ["operational readiness checklist"],
          "required_for": ["TO-05"],
          "estimated_duration": "1-2 hours"
        },
        "TO-05": {
          "name": "Operational Testing & Release",
          "phase": "release",
          "prerequisites": ["TO-04"],
          "produces": ["operational test results", "release package"],
          "required_for": [],
          "estimated_duration": "varies (hours to days)",
          "quality_gate": "G-TO-05: Operational Testing (BLOCKING)"
        }
      }
    },
    "feature_update": {
      "workflow_id": "feature_update",
      "name": "Feature Update Workflow",
      "description": "Update existing system with new features",
      "step_count": 5,
      "steps": {
        "FU-01": {
          "name": "Change Proposal & Impact Analysis",
          "phase": "analysis",
          "prerequisites": ["existing system architecture"],
          "produces": ["change proposal", "impact analysis"],
          "required_for": ["FU-02"],
          "estimated_duration": "30-60 minutes"
        },
        "FU-02": {
          "name": "Architecture Re-Engineering & Decomposition",
          "phase": "architecture",
          "prerequisites": ["FU-01"],
          "produces": ["updated architecture files (versioned)"],
          "required_for": ["FU-03"],
          "estimated_duration": "varies (hours)"
        },
        "FU-03": {
          "name": "Delta Highlighting & Approval",
          "phase": "review",
          "prerequisites": ["FU-02"],
          "produces": ["delta report", "approval decision"],
          "required_for": ["FU-04"],
          "estimated_duration": "15-30 minutes"
        },
        "FU-04": {
          "name": "Development Bootstrap & Implementation",
          "phase": "implementation",
          "prerequisites": ["FU-03"],
          "produces": ["updated service implementations"],
          "required_for": ["FU-05"],
          "estimated_duration": "varies (hours to days)"
        },
        "FU-05": {
          "name": "Integration, Validation & Release Preparation",
          "phase": "validation",
          "prerequisites": ["FU-04"],
          "produces": ["integration tests", "release package"],
          "required_for": [],
          "estimated_duration": "varies (hours)"
        }
      }
    }
  },
  "workflow_dependencies": {
    "00-setup": {
      "required_before": ["01-systems_engineering"],
      "optional_before": []
    },
    "01-systems_engineering": {
      "required_before": ["02-artifacts_visualization"],
      "optional_before": []
    },
    "02-artifacts_visualization": {
      "required_before": ["03-development (if full development)"],
      "optional_before": []
    },
    "03-development": {
      "required_before": ["04-testing_operations"],
      "optional_before": []
    },
    "04-testing_operations": {
      "required_before": [],
      "optional_before": []
    },
    "feature_update": {
      "required_before": [],
      "optional_before": [],
      "note": "Standalone workflow for existing systems"
    }
  },
  "quality_gates": [
    {
      "gate_id": "G-SE-03",
      "name": "Architecture Validation Gate",
      "workflow": "01-systems_engineering",
      "step": "SE-03",
      "type": "BLOCKING",
      "checks": ["Architecture files valid JSON", "service_id at top level", "All required fields present"]
    },
    {
      "gate_id": "G-D-05",
      "name": "Test Coverage Gate",
      "workflow": "03-development",
      "step": "D-05",
      "type": "BLOCKING",
      "checks": ["Test coverage ≥80%"]
    },
    {
      "gate_id": "G-TO-02",
      "name": "Docker Compose Validation Gate",
      "workflow": "04-testing_operations",
      "step": "TO-02",
      "type": "BLOCKING",
      "checks": ["docker-compose.yml valid", "All services start successfully"]
    },
    {
      "gate_id": "G-TO-05",
      "name": "Operational Testing Gate",
      "workflow": "04-testing_operations",
      "step": "TO-05",
      "type": "BLOCKING",
      "checks": ["All operational tests pass"]
    }
  ],
  "critical_paths": {
    "architecture_only": ["S-01", "S-01A", "S-02", "S-03", "SE-01", "SE-02", "SE-03", "SE-06", "AV-01", "AV-02", "AV-03"],
    "full_development": ["S-01", "S-01A", "S-02", "S-03", "SE-01", "SE-02", "SE-03", "SE-06", "AV-01", "D-01", "D-02", "D-03", "D-04", "D-05", "TO-01", "TO-02", "TO-03", "TO-04", "TO-05"]
  }
}
