{
  "workflow_metadata": {
    "workflow_id": "04a-testing",
    "name": "Testing Workflow",
    "version": "3.7.0",
    "description": "Integration testing and comprehensive testing (E2E, performance, security)",
    "created_from": "04-testing_operations.json v1.0.0 - TO-01, TO-05 extracted",
    "last_updated": "2025-10-27",
    "purpose": "Validate system functionality through testing",
    "context_reduction": "Reduced from 776 lines to ~350 lines (55% reduction)"
  },
  "prerequisites": {
    "required_workflows": [
      "00-setup",
      "01-systems_engineering",
      "02-artifacts_visualization",
      "03-development"
    ],
    "required_files": [
      "services/{service_name}/src/ (complete implementation)",
      "services/{service_name}/tests/ (test suite with >= 80% coverage)",
      "services/build_ready_index.json"
    ],
    "required_conditions": [
      "All services implemented",
      "All tests passing",
      "Test coverage >= 80%",
      "Observability instrumentation complete"
    ]
  },
  "workflow_steps": [
    {
      "step_id": "TO-01",
      "name": "Development Test Execution (DTE)",
      "description": "Comprehensive testing in development environment",
      "phase": "testing",
      "step_file": "workflow_steps/testing_operations/TO-01-DevelopmentTesting.json",
      "maps_from": "Parts of Dev-05, Dev-06: Development testing",
      "actions": [
        {
          "action_id": "TO-01-A01",
          "description": "Run complete unit test suite",
          "purpose": "Verify all units of code function correctly",
          "command_pattern": "pytest services/{service_name}/tests/unit/ (or language-specific)",
          "success_criteria": "All unit tests pass"
        },
        {
          "action_id": "TO-01-A02",
          "description": "Run integration tests",
          "purpose": "Verify components work together correctly",
          "command_pattern": "pytest services/{service_name}/tests/integration/",
          "success_criteria": "All integration tests pass"
        },
        {
          "action_id": "TO-01-A03",
          "description": "Run contract tests",
          "tool": "verify_component_contract.py",
          "command_pattern": "python3 {reflow_root}/tools/verify_component_contract.py {system_root} --all-services",
          "purpose": "Verify all services comply with ICDs",
          "success_criteria": "All contract verifications pass"
        },
        {
          "action_id": "TO-01-A04",
          "description": "Run security tests",
          "test_types": [
            "Authentication tests",
            "Authorization tests",
            "Input validation tests",
            "SQL injection prevention tests",
            "XSS prevention tests"
          ],
          "purpose": "Verify security controls work correctly"
        },
        {
          "action_id": "TO-01-A05",
          "description": "Generate test coverage report",
          "tools": [
            "coverage.py",
            "istanbul",
            "JaCoCo"
          ],
          "gate_enforcement": "Block if coverage < 80%",
          "output": "Test coverage report"
        },
        {
          "action_id": "TO-01-A06",
          "description": "Create DTE artifacts",
          "template": "dte_artifacts_template.json",
          "location": "specs/machine/dte_artifacts.json",
          "includes": [
            "Test results summary",
            "Coverage metrics",
            "Failed test details (if any)",
            "Test execution timestamp"
          ]
        }
      ],
      "tools_used": [
        "verify_component_contract.py",
        "Test frameworks (language-specific)"
      ],
      "templates_used": [
        "dte_artifacts_template.json"
      ],
      "outputs": [
        "Test results",
        "Coverage reports",
        "specs/machine/dte_artifacts.json"
      ],
      "gates": [
        {
          "gate_id": "G-TO-01",
          "name": "Development Testing Gate",
          "checks": [
            "All unit tests passing",
            "All integration tests passing",
            "All contract tests passing",
            "All security tests passing",
            "Test coverage >= 80%"
          ],
          "blocking": true
        }
      ]
    },
    {
      "step_id": "TO-05",
      "name": "Operational Testing & Release",
      "description": "End-to-end testing and production release certification",
      "phase": "release",
      "step_file": "workflow_steps/testing_operations/TO-05-OperationalTesting.json",
      "maps_from": "Dev-08: Operational Validation & Release",
      "actions": [
        {
          "action_id": "TO-05-A01",
          "description": "Run end-to-end (E2E) tests in staging",
          "purpose": "Validate complete user journeys in realistic environment",
          "test_scenarios": "Based on docs/USER_SCENARIOS.md",
          "tools": [
            "Selenium",
            "Cypress",
            "Playwright",
            "Postman"
          ],
          "success_criteria": "All E2E tests pass"
        },
        {
          "action_id": "TO-05-A02",
          "description": "Conduct user acceptance testing (UAT)",
          "purpose": "Validate system meets user requirements",
          "participants": "Product owner, key stakeholders",
          "based_on": [
            "docs/USER_SCENARIOS.md",
            "docs/SUCCESS_CRITERIA.md"
          ],
          "success_criteria": "UAT sign-off received"
        },
        {
          "action_id": "TO-05-A03",
          "description": "Run performance testing",
          "test_types": [
            "Load testing (expected load)",
            "Stress testing (breaking point)",
            "Soak testing (sustained load)",
            "Spike testing (sudden load changes)"
          ],
          "tools": [
            "JMeter",
            "Gatling",
            "k6",
            "Locust"
          ],
          "success_criteria": "Performance meets SLOs"
        },
        {
          "action_id": "TO-05-A04",
          "description": "Conduct security testing",
          "test_types": [
            "Vulnerability scanning",
            "Penetration testing",
            "Dependency scanning",
            "Container image scanning"
          ],
          "tools": [
            "OWASP ZAP",
            "Burp Suite",
            "Snyk",
            "Trivy"
          ],
          "success_criteria": "No critical vulnerabilities"
        },
        {
          "action_id": "TO-05-A05",
          "description": "Run disaster recovery drills",
          "scenarios": [
            "Database failure and recovery",
            "Service failure and restart",
            "Complete system failure and recovery",
            "Data corruption and restore from backup"
          ],
          "purpose": "Validate backup and recovery procedures"
        },
        {
          "action_id": "TO-05-A06",
          "description": "Create OTE artifacts",
          "template": "ote_artifacts_template.json",
          "location": "specs/machine/ote_artifacts.json",
          "includes": [
            "E2E test results",
            "UAT results",
            "Performance test results",
            "Security test results",
            "DR drill results"
          ]
        },
        {
          "action_id": "TO-05-A07",
          "description": "Release certification decision",
          "decision_point": "Go/No-Go for production release",
          "criteria": [
            "All tests passing",
            "Performance meets SLOs",
            "No critical security vulnerabilities",
            "UAT approved",
            "Operational readiness confirmed"
          ],
          "outputs": "Release certification report"
        },
        {
          "action_id": "TO-05-A08",
          "description": "Deploy to production (if certified)",
          "deployment_strategy": [
            "Blue-green deployment",
            "Canary deployment",
            "Rolling deployment"
          ],
          "post_deployment": [
            "Verify health checks",
            "Monitor metrics",
            "Validate smoke tests",
            "Monitor alerts"
          ]
        }
      ],
      "tools_used": [
        "E2E testing frameworks",
        "Performance testing tools",
        "Security testing tools"
      ],
      "templates_used": [
        "ote_artifacts_template.json"
      ],
      "outputs": [
        "E2E test results",
        "Performance test results",
        "Security test results",
        "specs/machine/ote_artifacts.json",
        "Release certification report",
        "Production deployment (if approved)"
      ],
      "gates": [
        {
          "gate_id": "G-TO-05",
          "name": "Release Certification Gate",
          "checks": [
            "All E2E tests passing",
            "UAT approved",
            "Performance tests meet SLOs",
            "No critical security vulnerabilities",
            "Disaster recovery validated",
            "Release certification approved"
          ],
          "blocking": true,
          "note": "This is the final gate before production release"
        }
      ]
    }
  ],
  "quality_gates": {
    "gates": []
  },
  "next_workflow": "04b-operations"
}