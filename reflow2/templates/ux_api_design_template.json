{
  "template_version": "1.0",
  "template_description": "User Experience and API Design requirements for IT systems with human users. Ensures straightforward, positive user experience and developer-friendly APIs.",
  "applicability": {
    "framework": "uaf",
    "system_type": "IT systems with human users or external developers",
    "mandatory_when": "Any service exposing APIs to humans, web interfaces, mobile apps, or third-party developers",
    "optional_when": "Internal machine-to-machine services only"
  },
  "ux_philosophy": {
    "core_principles": [
      "REQUIRED: simplicity_first | intuitive_design | clear_feedback | error_recovery | accessibility | performance"
    ],
    "user_types": [
      {
        "user_type": "EXAMPLE: end_user",
        "description": "Non-technical users accessing via web or mobile app",
        "experience_level": "beginner | intermediate | expert",
        "primary_goals": ["EXAMPLE: view data", "EXAMPLE: submit requests", "EXAMPLE: track status"]
      },
      {
        "user_type": "EXAMPLE: developer",
        "description": "Third-party developers integrating via API",
        "experience_level": "intermediate | expert",
        "primary_goals": ["EXAMPLE: integrate API", "EXAMPLE: automate workflows", "EXAMPLE: build applications"]
      },
      {
        "user_type": "EXAMPLE: administrator",
        "description": "System administrators managing configuration",
        "experience_level": "expert",
        "primary_goals": ["EXAMPLE: configure system", "EXAMPLE: monitor health", "EXAMPLE: manage users"]
      }
    ],
    "user_journey_maps": {
      "exists": false,
      "location": "OPTIONAL: Path to user journey documentation",
      "key_journeys": [
        "EXAMPLE: New user onboarding",
        "EXAMPLE: Common workflow completion",
        "EXAMPLE: Error recovery"
      ]
    },
    "usability_targets": {
      "time_to_first_success": "REQUIRED: Duration for new user to complete first task (e.g., 5 minutes, 30 minutes)",
      "task_success_rate": "REQUIRED: Percentage (e.g., 95% of users complete common tasks without help)",
      "user_satisfaction_score": "OPTIONAL: Target NPS, CSAT, or SUS score"
    }
  },
  "api_design_principles": {
    "architectural_style": "REQUIRED: REST | GraphQL | gRPC | SOAP | hybrid",
    "chosen_rationale": "REQUIRED: Explain why this API style was chosen for user needs",
    "design_philosophy": [
      "REQUIRED: resource_oriented | action_oriented | query_oriented",
      "REQUIRED: consistent_naming | self_descriptive | hypermedia_driven | stateless"
    ],
    "consistency_rules": {
      "naming_convention": "REQUIRED: snake_case | camelCase | kebab-case for JSON fields",
      "endpoint_naming": "REQUIRED: plural_nouns | verbs | mixed (e.g., /users, /orders, /search)",
      "http_methods": {
        "GET": "Retrieve resources (idempotent, no side effects)",
        "POST": "Create new resources or complex queries",
        "PUT": "Replace entire resource (idempotent)",
        "PATCH": "Partially update resource",
        "DELETE": "Remove resource (idempotent)"
      },
      "status_code_usage": {
        "200_OK": "Successful GET, PUT, PATCH, DELETE",
        "201_Created": "Successful POST creating new resource",
        "204_No_Content": "Successful DELETE with no response body",
        "400_Bad_Request": "Client error (invalid input)",
        "401_Unauthorized": "Authentication required or failed",
        "403_Forbidden": "Authenticated but not authorized",
        "404_Not_Found": "Resource doesn't exist",
        "409_Conflict": "Resource conflict (e.g., duplicate)",
        "422_Unprocessable_Entity": "Validation errors",
        "429_Too_Many_Requests": "Rate limit exceeded",
        "500_Internal_Server_Error": "Server error (should be rare)",
        "503_Service_Unavailable": "Temporary unavailability (maintenance, overload)"
      }
    },
    "backwards_compatibility": {
      "guarantee": "REQUIRED: Always | within_major_version | best_effort | none",
      "breaking_change_policy": "REQUIRED: Describe how breaking changes are communicated and handled",
      "deprecation_timeline": "REQUIRED: Duration before deprecated features removed (e.g., 6 months, 1 year)"
    }
  },
  "rest_api_design": {
    "applicable": true,
    "resource_modeling": {
      "primary_resources": [
        {
          "resource": "EXAMPLE: users",
          "endpoints": [
            "GET /api/v1/users - List users",
            "GET /api/v1/users/{id} - Get user details",
            "POST /api/v1/users - Create user",
            "PUT /api/v1/users/{id} - Update user",
            "DELETE /api/v1/users/{id} - Delete user"
          ],
          "relationships": [
            "GET /api/v1/users/{id}/orders - User's orders (sub-resource)"
          ]
        }
      ],
      "nested_resources": {
        "max_nesting_depth": 2,
        "rationale": "Avoid /users/{id}/orders/{id}/items/{id} - too deep, use query params instead"
      }
    },
    "query_parameters": {
      "filtering": {
        "supported": true,
        "syntax": "REQUIRED: ?status=active&role=admin",
        "operators": [
          "OPTIONAL: eq, ne, gt, lt, gte, lte, in, contains"
        ]
      },
      "sorting": {
        "supported": true,
        "syntax": "REQUIRED: ?sort=created_at&order=desc or ?sort=-created_at",
        "multi_field_sorting": true
      },
      "pagination": {
        "strategy": "REQUIRED: offset_limit | cursor_based | page_number",
        "default_page_size": 20,
        "max_page_size": 100,
        "response_format": {
          "total_count": true,
          "next_page_link": true,
          "previous_page_link": true,
          "page_metadata": true
        },
        "example": "?page=1&per_page=20 or ?limit=20&offset=0 or ?cursor=abc123"
      },
      "field_selection": {
        "supported": false,
        "syntax": "OPTIONAL: ?fields=id,name,email (sparse fieldsets)"
      },
      "search": {
        "supported": true,
        "syntax": "REQUIRED: ?q=search_term or ?search=keyword",
        "search_scope": "REQUIRED: Describe which fields are searchable"
      }
    },
    "response_format": {
      "content_type": "application/json",
      "character_encoding": "UTF-8",
      "response_envelope": {
        "use_envelope": false,
        "envelope_structure": "OPTIONAL: {\"data\": {...}, \"meta\": {...}, \"errors\": [...]}",
        "rationale": "REQUIRED: Envelopes add complexity - only use if necessary for consistency"
      },
      "null_handling": "REQUIRED: include_null_fields | omit_null_fields",
      "timestamp_format": "REQUIRED: ISO 8601 (2024-01-15T10:30:00Z) | Unix epoch",
      "boolean_format": "REQUIRED: true/false | 1/0 | 'true'/'false'",
      "large_numbers": "REQUIRED: string | number (avoid precision loss in JavaScript)"
    },
    "hypermedia_hateoas": {
      "enabled": false,
      "link_format": "OPTIONAL: HAL | JSON-LD | custom",
      "rationale": "HATEOAS improves discoverability but adds complexity - evaluate trade-offs"
    }
  },
  "error_handling": {
    "error_response_format": {
      "structure": {
        "error_code": "REQUIRED: Machine-readable error code (e.g., VALIDATION_ERROR, RESOURCE_NOT_FOUND)",
        "message": "REQUIRED: Human-readable error message",
        "details": "OPTIONAL: Additional context (e.g., which fields failed validation)",
        "trace_id": "REQUIRED: Request ID for troubleshooting",
        "timestamp": "OPTIONAL: When error occurred",
        "documentation_url": "OPTIONAL: Link to error documentation"
      },
      "example": {
        "error_code": "VALIDATION_ERROR",
        "message": "The request contains invalid data",
        "details": [
          {
            "field": "email",
            "error": "Email address is not valid",
            "provided_value": "invalid-email"
          }
        ],
        "trace_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
        "documentation_url": "https://api.example.com/docs/errors#VALIDATION_ERROR"
      }
    },
    "user_friendly_messages": {
      "principle": "Errors should help users recover, not just report failure",
      "guidelines": [
        "REQUIRED: Explain what went wrong in simple terms",
        "REQUIRED: Suggest how to fix the problem",
        "REQUIRED: Avoid technical jargon unless targeting developers",
        "REQUIRED: Never expose internal system details or stack traces to end users"
      ],
      "examples": {
        "bad": "NullPointerException in UserService.createUser() at line 247",
        "good": "Email address is required. Please provide your email address and try again.",
        "bad": "FK_CONSTRAINT_VIOLATION: users_organization_id_fkey",
        "good": "The organization you selected doesn't exist. Please choose a valid organization."
      }
    },
    "validation_errors": {
      "field_level_errors": true,
      "error_accumulation": "REQUIRED: return_all_errors | fail_fast",
      "localization": false,
      "localized_messages": "OPTIONAL: Support multiple languages for error messages"
    },
    "error_logging": {
      "log_all_errors": true,
      "include_request_context": true,
      "alert_on_error_spike": true,
      "error_budget": "OPTIONAL: Define acceptable error rates (e.g., 99.9% success rate)"
    }
  },
  "api_documentation": {
    "specification_format": "REQUIRED: OpenAPI_3.0 | OpenAPI_2.0 | GraphQL_Schema | gRPC_Proto | AsyncAPI",
    "specification_location": "REQUIRED: Path to API specification file (e.g., openapi.yaml, schema.graphql)",
    "auto_generated": true,
    "generation_tool": "OPTIONAL: Swagger | Redoc | FastAPI | Postman | custom",
    "interactive_documentation": {
      "enabled": true,
      "tool": "REQUIRED: Swagger_UI | Redoc | Stoplight | Postman | custom",
      "public_url": "REQUIRED: https://api.example.com/docs or https://docs.example.com",
      "try_it_out_enabled": true,
      "authentication_in_docs": "REQUIRED: Describe how users authenticate in interactive docs (API key, OAuth)"
    },
    "documentation_quality": {
      "every_endpoint_documented": true,
      "request_examples": true,
      "response_examples": true,
      "error_examples": true,
      "authentication_examples": true,
      "code_samples": {
        "enabled": true,
        "languages": [
          "EXAMPLE: curl",
          "EXAMPLE: Python",
          "EXAMPLE: JavaScript",
          "EXAMPLE: Java"
        ]
      },
      "description_completeness": "REQUIRED: Every field, parameter, and response must have clear descriptions"
    },
    "getting_started_guide": {
      "exists": true,
      "location": "REQUIRED: README.md | docs/getting-started.md",
      "includes": [
        "REQUIRED: Authentication setup",
        "REQUIRED: First API call example",
        "REQUIRED: Common use cases",
        "REQUIRED: Rate limiting information",
        "REQUIRED: Error handling examples"
      ],
      "time_to_first_call": "REQUIRED: Duration for developer to make first successful API call (e.g., 5 minutes)"
    },
    "changelog": {
      "exists": true,
      "location": "REQUIRED: CHANGELOG.md | docs/api-changelog.md",
      "format": "REQUIRED: Keep a Changelog format (Added, Changed, Deprecated, Removed, Fixed, Security)",
      "update_frequency": "REQUIRED: Every release"
    }
  },
  "versioning_strategy": {
    "versioning_scheme": "REQUIRED: url_path | header | query_param | content_negotiation",
    "current_version": "REQUIRED: v1 | 1.0 | 2024-01",
    "version_format": "REQUIRED: major_only | major.minor | date_based | semantic",
    "versioning_examples": {
      "url_path": "/api/v1/users, /api/v2/users",
      "header": "Accept: application/vnd.api.v1+json",
      "query_param": "/api/users?version=1",
      "content_negotiation": "Accept: application/vnd.api+json; version=1"
    },
    "chosen_approach": "REQUIRED: url_path (most visible and explicit) | other",
    "version_lifecycle": {
      "support_multiple_versions": true,
      "simultaneous_versions_supported": 2,
      "deprecation_notice_period": "6 months",
      "sunset_header": true,
      "migration_guide_provided": true
    },
    "breaking_changes": {
      "definition": "REQUIRED: What constitutes a breaking change (e.g., removing fields, changing types, new required fields)",
      "breaking_change_policy": "REQUIRED: Only allowed in major version bumps",
      "migration_tooling": "OPTIONAL: Automated migration scripts or tools"
    }
  },
  "performance_ux": {
    "response_time_targets": {
      "p50_latency": "REQUIRED: Median response time target (e.g., 100ms, 200ms)",
      "p95_latency": "REQUIRED: 95th percentile target (e.g., 300ms, 500ms)",
      "p99_latency": "REQUIRED: 99th percentile target (e.g., 1000ms, 2000ms)",
      "timeout": "REQUIRED: Maximum request duration before timeout (e.g., 30s, 60s)"
    },
    "caching_strategy": {
      "enabled": true,
      "cache_headers": {
        "cache_control": "REQUIRED: Cache-Control directives (e.g., public, max-age=3600, no-cache)",
        "etag_support": true,
        "last_modified_support": true
      },
      "cdn_usage": {
        "enabled": false,
        "cdn_provider": "OPTIONAL: cloudflare | fastly | akamai | cloudfront"
      }
    },
    "compression": {
      "enabled": true,
      "algorithms": [
        "gzip",
        "br (Brotli)"
      ],
      "minimum_response_size": "1KB"
    },
    "payload_size_limits": {
      "max_request_size": "REQUIRED: 10MB | 100MB",
      "max_response_size": "REQUIRED: 10MB | 100MB",
      "streaming_support": false,
      "streaming_use_cases": "OPTIONAL: Large file downloads, real-time data"
    },
    "progressive_enhancement": {
      "lazy_loading": false,
      "incremental_responses": false,
      "chunked_transfer": false
    }
  },
  "rate_limiting_ux": {
    "rate_limit_headers": {
      "enabled": true,
      "headers": {
        "X-RateLimit-Limit": "Total requests allowed in window",
        "X-RateLimit-Remaining": "Requests remaining in current window",
        "X-RateLimit-Reset": "Unix timestamp when window resets",
        "Retry-After": "Seconds to wait before retrying (when 429 returned)"
      }
    },
    "rate_limit_documentation": {
      "clearly_documented": true,
      "location": "REQUIRED: API docs, getting started guide",
      "upgrade_path": "OPTIONAL: How to request higher rate limits"
    },
    "user_feedback": {
      "proactive_warnings": false,
      "warning_threshold": "OPTIONAL: Warn at 80% of rate limit",
      "upgrade_suggestions": "OPTIONAL: Suggest upgrading plan when hitting limits"
    }
  },
  "authentication_ux": {
    "authentication_flow": {
      "user_friendly": true,
      "clear_instructions": true,
      "example_credentials": "OPTIONAL: For sandbox/testing environments",
      "token_visibility": "REQUIRED: How users obtain and manage tokens (dashboard, CLI, API)"
    },
    "token_management": {
      "token_creation": "REQUIRED: self_service | admin_approval | automated",
      "token_rotation": {
        "supported": true,
        "user_initiated": true,
        "notification_before_expiry": true
      },
      "token_revocation": {
        "supported": true,
        "immediate_effect": true
      },
      "multiple_tokens": {
        "supported": true,
        "use_case": "Different tokens for different applications or environments"
      }
    },
    "sandbox_environment": {
      "available": true,
      "purpose": "Allow developers to test without affecting production data",
      "data_reset_frequency": "OPTIONAL: daily | on_demand",
      "rate_limits": "OPTIONAL: More relaxed than production"
    }
  },
  "developer_experience": {
    "sdks_libraries": {
      "official_sdks": [
        {
          "language": "EXAMPLE: Python",
          "repository": "https://github.com/example/python-sdk",
          "package_manager": "pip install example-sdk",
          "documentation": "https://docs.example.com/python-sdk"
        },
        {
          "language": "EXAMPLE: JavaScript",
          "repository": "https://github.com/example/js-sdk",
          "package_manager": "npm install example-sdk",
          "documentation": "https://docs.example.com/js-sdk"
        }
      ],
      "community_sdks": [
        "OPTIONAL: Links to community-maintained SDKs"
      ],
      "sdk_features": [
        "REQUIRED: Type safety | auto-retry | error handling | pagination helpers | authentication"
      ]
    },
    "code_examples": {
      "repository": "OPTIONAL: https://github.com/example/code-examples",
      "examples_for_common_tasks": true,
      "runnable_examples": true,
      "example_languages": [
        "EXAMPLE: Python",
        "EXAMPLE: JavaScript",
        "EXAMPLE: curl"
      ]
    },
    "postman_collection": {
      "available": true,
      "location": "REQUIRED: URL to Postman collection",
      "includes_environments": true,
      "up_to_date": true
    },
    "developer_portal": {
      "exists": false,
      "url": "OPTIONAL: https://developers.example.com",
      "features": [
        "OPTIONAL: API key management | usage analytics | documentation | support | community forum"
      ]
    },
    "support_channels": {
      "documentation": "https://docs.example.com",
      "faq": "OPTIONAL: https://docs.example.com/faq",
      "community_forum": "OPTIONAL: https://community.example.com",
      "stack_overflow_tag": "OPTIONAL: example-api",
      "github_issues": "OPTIONAL: https://github.com/example/api/issues",
      "email_support": "OPTIONAL: support@example.com",
      "chat_support": "OPTIONAL: Slack, Discord",
      "response_time_sla": "OPTIONAL: Define expected response times for support requests"
    }
  },
  "api_gateway_ux": {
    "unified_entry_point": {
      "single_base_url": true,
      "base_url": "REQUIRED: https://api.example.com",
      "no_direct_service_access": true,
      "rationale": "All traffic through gateway for consistent experience, security, and observability"
    },
    "request_id_tracking": {
      "enabled": true,
      "header_name": "X-Request-ID",
      "client_can_provide": true,
      "included_in_response": true,
      "included_in_errors": true,
      "use_in_support": "Users can provide request ID for troubleshooting"
    },
    "cross_origin_resource_sharing": {
      "cors_enabled": true,
      "preflight_caching": true,
      "clear_cors_errors": "Provide helpful CORS error messages, not generic browser errors"
    }
  },
  "accessibility": {
    "api_accessibility": {
      "consistent_structure": true,
      "predictable_behavior": true,
      "clear_naming": true,
      "self_descriptive": true
    },
    "web_ui_accessibility": {
      "wcag_compliance": "OPTIONAL: WCAG 2.1 Level AA | AAA",
      "screen_reader_compatible": false,
      "keyboard_navigation": false,
      "color_contrast": false,
      "text_alternatives": false
    }
  },
  "internationalization_localization": {
    "i18n_support": {
      "enabled": false,
      "supported_languages": [
        "OPTIONAL: en-US",
        "OPTIONAL: es-ES",
        "OPTIONAL: fr-FR"
      ],
      "language_detection": "OPTIONAL: Accept-Language header | query param | user preference",
      "default_language": "en-US"
    },
    "localized_content": {
      "error_messages": false,
      "documentation": false,
      "date_time_formats": "OPTIONAL: Respect user locale for date/time formatting",
      "number_formats": "OPTIONAL: Decimal separators, currency"
    },
    "timezone_handling": {
      "strategy": "REQUIRED: always_utc | user_timezone | configurable",
      "timezone_in_responses": true,
      "timezone_in_requests": "OPTIONAL: Allow users to specify timezone"
    }
  },
  "real_time_updates": {
    "enabled": false,
    "mechanisms": [
      "OPTIONAL: webhooks | websockets | server_sent_events | polling"
    ],
    "use_cases": [
      "OPTIONAL: Notify clients of data changes | real-time status updates | event notifications"
    ],
    "webhook_configuration": {
      "user_configurable": false,
      "retry_logic": true,
      "signature_verification": true,
      "payload_format": "OPTIONAL: Same as API responses"
    }
  },
  "testing_tools": {
    "sandbox_api": {
      "available": true,
      "base_url": "REQUIRED: https://sandbox.api.example.com or https://api.example.com/sandbox",
      "test_data": "Realistic test data for experimentation",
      "no_side_effects": "Sandbox operations don't affect production"
    },
    "mock_server": {
      "available": false,
      "use_case": "OPTIONAL: Offline development, testing without real API",
      "location": "OPTIONAL: Docker image, npm package"
    }
  },
  "INSTRUCTIONS": {
    "when_to_use": "Use this template for ANY UAF system with human users, web interfaces, mobile apps, or third-party developer access",
    "required_sections": [
      "ux_philosophy",
      "api_design_principles",
      "rest_api_design (or graphql_api_design, grpc_api_design as appropriate)",
      "error_handling (CRITICAL for good UX)",
      "api_documentation (MANDATORY)",
      "versioning_strategy",
      "performance_ux",
      "authentication_ux"
    ],
    "highly_recommended_sections": [
      "rate_limiting_ux (transparency builds trust)",
      "developer_experience (SDKs, examples)",
      "api_gateway_ux (unified experience)"
    ],
    "optional_sections": [
      "accessibility (if web UI provided)",
      "internationalization (for global audiences)",
      "real_time_updates (for event-driven systems)"
    ],
    "integration_with_architecture": "Create ux_api_design.json in specs/machine/ directory alongside service architectures",
    "validation_requirement": "UX and API design must be reviewed by developers AND end users before implementation",
    "user_testing": "Conduct usability testing with real users before production release",
    "framework_conditional": "Only required for UAF framework with deployment_characteristics.port_management_applicable == true AND human users present"
  }
}
