{
  "$schema": "integration_requirements_schema.json",
  "template_version": "2.0.0",
  "template_description": "Template for defining integration requirements in bottom-up approach - ENHANCED for component-level integration",
  "requirements_metadata": {
    "created_date": "YYYY-MM-DD",
    "system_name": "REPLACE_WITH_SYSTEM_NAME",
    "integration_approach": "bottom_up",
    "analyst": "REPLACE_WITH_ANALYST_NAME_OR_AGENT",
    "based_on_inventory": "component_inventory.json",
    "stakeholders": [
      "STAKEHOLDER_1: Role and interest",
      "STAKEHOLDER_2: Role and interest"
    ]
  },
  "integration_goal": {
    "high_level_goal": "REPLACE_WITH_HIGH_LEVEL_GOAL (e.g., 'Create unified authentication and authorization system from 10 existing Python packages')",
    "business_justification": "REPLACE_WITH_BUSINESS_JUSTIFICATION (e.g., 'Reduce operational complexity by consolidating auth services')",
    "success_definition": "REPLACE_WITH_SUCCESS_DEFINITION (e.g., 'Single API endpoint for all auth operations with <100ms latency')",
    "integration_scope": "full_integration | partial_integration | federation",
    "integration_timeline": "OPTIONAL: Target completion date or duration"
  },
  "target_capabilities": [
    {
      "capability_id": "CAP-001",
      "capability_name": "User Authentication",
      "capability_description": "Authenticate users via username/password, OAuth, or API keys",
      "priority": "critical | high | medium | low",
      "provided_by_components": [
        {
          "component_id": "auth_library",
          "coverage": "full | partial | none",
          "notes": "Provides username/password auth, missing OAuth"
        }
      ],
      "gaps": [
        "OAuth authentication not available in any component",
        "No support for multi-factor authentication"
      ],
      "target_interface": {
        "interface_type": "rest_api",
        "endpoint": "POST /api/v1/auth/login",
        "expected_behavior": "Accept credentials, return JWT token with 200ms"
      }
    }
  ],
  "component_mapping": {
    "auth_library": {
      "capabilities_provided": [
        "User authentication (username/password)",
        "Session management",
        "JWT token generation"
      ],
      "role_in_integration": "primary | supporting | optional",
      "integration_priority": "critical | high | medium | low",
      "modifications_required": "none | minor | major | complete_rewrite",
      "modifications_summary": "Add OAuth support, expose REST API wrapper"
    }
  },
  "required_interactions": [
    {
      "interaction_id": "INT-001",
      "from_component": "auth_library",
      "to_component": "rbac_service",
      "interaction_purpose": "Pass authenticated user to authorization check",
      "interaction_type": "synchronous_call | asynchronous_message | data_sharing | event_driven",
      "current_state": "no_integration | partial_integration | fully_integrated",
      "target_state": "fully_integrated",
      "required_data_flow": {
        "direction": "auth_library -> rbac_service",
        "data_format": "JSON",
        "data_schema": {
          "user_id": "string (UUID)",
          "session_id": "string",
          "timestamp": "ISO8601 datetime"
        }
      },
      "integration_mechanism": {
        "proposed_mechanism": "rest_api | grpc | message_queue | shared_database | in_process_call",
        "rationale": "EXPLAIN: Why this mechanism is appropriate",
        "alternatives_considered": [
          {
            "mechanism": "shared_database",
            "rejected_reason": "Tight coupling, violates single responsibility"
          }
        ]
      },
      "performance_requirements": {
        "max_latency_ms": 50,
        "min_throughput_rps": 500,
        "reliability_target": "99.9%"
      },
      "failure_handling": {
        "failure_mode": "timeout | service_unavailable | data_corruption",
        "fallback_behavior": "Return cached permissions | Deny access | Use default permissions",
        "retry_strategy": "exponential_backoff | fixed_interval | no_retry"
      }
    }
  ],
  "data_flow_requirements": [
    {
      "flow_id": "FLOW-001",
      "flow_name": "User Login Flow",
      "flow_description": "User submits credentials, system validates and returns token",
      "components_involved": ["api_gateway", "auth_library", "user_database", "rbac_service"],
      "flow_steps": [
        {
          "step": 1,
          "component": "api_gateway",
          "action": "Receive login request from client",
          "data_in": "{ username: string, password: string }",
          "data_out": "Forward to auth_library"
        },
        {
          "step": 2,
          "component": "auth_library",
          "action": "Validate credentials against user_database",
          "data_in": "{ username: string, password: string }",
          "data_out": "{ user_id: string, authenticated: boolean }"
        }
      ],
      "performance_target": "Complete flow in <100ms at p95"
    }
  ],
  "architectural_constraints": [
    {
      "constraint_id": "CONS-001",
      "constraint_type": "technical | business | regulatory | operational",
      "constraint_description": "All components must be containerized for deployment",
      "rationale": "Standardize deployment, enable orchestration",
      "affected_components": ["auth_library", "rbac_service"],
      "remediation_required": [
        {
          "component": "auth_library",
          "action": "Create Dockerfile, extract configuration to environment variables"
        }
      ]
    }
  ],
  "non_functional_requirements": {
    "performance": {
      "latency_targets": {
        "p50": "50ms",
        "p95": "100ms",
        "p99": "200ms"
      },
      "throughput_targets": {
        "min_rps": 1000,
        "peak_rps": 5000
      }
    },
    "reliability": {
      "availability_target": "99.9%",
      "mttr_target": "< 15 minutes"
    },
    "security": {
      "authentication_required": true,
      "authorization_model": "RBAC | ABAC | ACL",
      "encryption_in_transit": true,
      "encryption_at_rest": true,
      "audit_logging": true
    }
  },
  "success_criteria": [
    {
      "criterion_id": "SC-001",
      "criterion": "All target capabilities are available through unified API",
      "measurement": "API testing coverage â‰¥ 95%",
      "priority": "critical | high | medium | low"
    }
  ],
  "integration_phases": [
    {
      "phase": 1,
      "phase_name": "Core Authentication Integration",
      "components_included": ["auth_library", "user_database", "api_gateway"],
      "target_capabilities": ["User login", "Token generation"],
      "duration_estimate": "2 weeks"
    }
  ],
  "risks": [
    {
      "risk_id": "RISK-001",
      "risk_description": "auth_library is tightly coupled to legacy database schema",
      "impact": "high | medium | low",
      "probability": "high | medium | low",
      "mitigation_strategy": "Create database abstraction layer"
    }
  ],
  "assumptions": [
    "All components are written in Python 3.9+",
    "All components can be containerized"
  ],
  "out_of_scope": [
    "Multi-tenancy support (future phase)"
  ],
  "INSTRUCTIONS": {
    "purpose": "This template is used in bottom-up systems engineering (workflow step BU-02) to define integration requirements after cataloging components",
    "when_to_use": "After completing component_inventory.json, use this to define HOW components should work together",
    "required_fields": [
      "integration_goal",
      "target_capabilities",
      "component_mapping",
      "required_interactions",
      "success_criteria"
    ],
    "output_location": "specs/machine/integration_requirements.json"
  }
}
