{
  "template_version": "1.0",
  "template_description": "Service Risk Assessment - Identify and mitigate risks during architecture design (SE-02-A04)",
  "created_for": "Reflow v3.6.0 - Early Testing Integration Feature",
  "purpose": "Identify architectural, technical, and operational risks BEFORE implementation to prevent costly rework",

  "service_name": "REPLACE_WITH_SERVICE_NAME",
  "service_id": "REPLACE_WITH_SERVICE_ID",
  "version": "1.0.0",
  "date_created": "YYYY-MM-DD",
  "assessment_date": "YYYY-MM-DD",
  "assessed_by": "ARCHITECT_NAME or LLM_AGENT",

  "risk_assessment_methodology": {
    "approach": "Qualitative risk matrix (likelihood × impact)",
    "likelihood_scale": {
      "1": "Rare (< 10% chance)",
      "2": "Unlikely (10-30% chance)",
      "3": "Possible (30-50% chance)",
      "4": "Likely (50-70% chance)",
      "5": "Almost Certain (> 70% chance)"
    },
    "impact_scale": {
      "1": "Negligible (minor inconvenience)",
      "2": "Minor (some functionality affected)",
      "3": "Moderate (significant functionality affected)",
      "4": "Major (service unusable)",
      "5": "Catastrophic (data loss, security breach, system-wide failure)"
    },
    "risk_score_calculation": "Likelihood × Impact = Risk Score (1-25)",
    "risk_levels": {
      "1-5": "Low risk - Monitor",
      "6-10": "Medium risk - Plan mitigation",
      "11-15": "High risk - Implement mitigation",
      "16-25": "Critical risk - Must address before deployment"
    }
  },

  "architectural_risks": {
    "description": "Risks related to system design, structure, and component interactions",
    "risks": [
      {
        "risk_id": "ARCH-001",
        "category": "architectural",
        "subcategory": "CHOOSE: coupling | cohesion | scalability | complexity | technology_choice",
        "title": "EXAMPLE: High coupling between services",
        "description": "Detailed description of the risk and why it's a concern",
        "likelihood": 3,
        "impact": 4,
        "risk_score": 12,
        "risk_level": "HIGH",
        "triggers": [
          "What conditions would cause this risk to materialize"
        ],
        "consequences": [
          "What happens if this risk occurs",
          "Impact on system availability",
          "Impact on development velocity"
        ],
        "affected_components": [
          "SERVICE_A",
          "SERVICE_B"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Introduce API gateway to decouple services",
            "effort": "CHOOSE: low | medium | high",
            "effectiveness": "Reduces likelihood from 3 to 2",
            "implementation_phase": "CHOOSE: architecture | development | testing | deployment",
            "status": "CHOOSE: proposed | approved | in_progress | completed | rejected"
          }
        ],
        "residual_risk": {
          "likelihood": 2,
          "impact": 4,
          "risk_score": 8,
          "acceptable": true
        },
        "owner": "ARCHITECT_NAME or TEAM_NAME",
        "target_resolution_date": "YYYY-MM-DD or null"
      }
    ]
  },

  "technical_risks": {
    "description": "Risks related to technology choices, dependencies, and implementation",
    "risks": [
      {
        "risk_id": "TECH-001",
        "category": "technical",
        "subcategory": "CHOOSE: dependencies | performance | security | data_integrity | technology_maturity",
        "title": "EXAMPLE: Dependency on unmaintained library",
        "description": "Service depends on library X which has not been updated in 3 years",
        "likelihood": 4,
        "impact": 3,
        "risk_score": 12,
        "risk_level": "HIGH",
        "triggers": [
          "Library has critical security vulnerability",
          "Library incompatible with new Python/Node version"
        ],
        "consequences": [
          "Cannot upgrade runtime version",
          "Security vulnerabilities remain unpatched",
          "Must fork and maintain library ourselves"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Evaluate alternative libraries with active maintenance",
            "effort": "medium",
            "effectiveness": "Eliminates risk entirely",
            "implementation_phase": "architecture",
            "status": "proposed"
          },
          {
            "strategy": "Plan to fork library if needed",
            "effort": "high",
            "effectiveness": "Provides fallback option",
            "implementation_phase": "development",
            "status": "contingency"
          }
        ],
        "residual_risk": {
          "likelihood": 1,
          "impact": 2,
          "risk_score": 2,
          "acceptable": true
        },
        "owner": "TECH_LEAD",
        "target_resolution_date": "Before development starts"
      }
    ]
  },

  "operational_risks": {
    "description": "Risks related to deployment, operations, and production environment",
    "risks": [
      {
        "risk_id": "OPS-001",
        "category": "operational",
        "subcategory": "CHOOSE: deployment | monitoring | scaling | recovery | maintenance",
        "title": "EXAMPLE: No automated rollback mechanism",
        "description": "If deployment fails in production, manual rollback required (15-30 min MTTR)",
        "likelihood": 3,
        "impact": 4,
        "risk_score": 12,
        "risk_level": "HIGH",
        "triggers": [
          "Bad deployment reaches production",
          "Bug not caught in testing"
        ],
        "consequences": [
          "Extended downtime (15-30 minutes)",
          "Impact to users",
          "SLA breach potential"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Implement automated rollback in CI/CD pipeline",
            "effort": "medium",
            "effectiveness": "Reduces MTTR to < 5 minutes",
            "implementation_phase": "testing",
            "status": "proposed"
          },
          {
            "strategy": "Blue-green deployment with traffic shifting",
            "effort": "high",
            "effectiveness": "Zero-downtime rollback",
            "implementation_phase": "deployment",
            "status": "future_consideration"
          }
        ],
        "residual_risk": {
          "likelihood": 3,
          "impact": 2,
          "risk_score": 6,
          "acceptable": true
        },
        "owner": "DEVOPS_LEAD",
        "target_resolution_date": "Before production deployment"
      }
    ]
  },

  "security_risks": {
    "description": "Risks related to authentication, authorization, data protection, and vulnerabilities",
    "risks": [
      {
        "risk_id": "SEC-001",
        "category": "security",
        "subcategory": "CHOOSE: authentication | authorization | encryption | injection | exposure | compliance",
        "title": "EXAMPLE: API endpoints accessible without authentication",
        "description": "Several admin endpoints not protected by authentication middleware",
        "likelihood": 4,
        "impact": 5,
        "risk_score": 20,
        "risk_level": "CRITICAL",
        "triggers": [
          "Attacker discovers unprotected endpoints",
          "Misconfiguration in production"
        ],
        "consequences": [
          "Unauthorized access to admin functions",
          "Data breach potential",
          "Compliance violations (GDPR, HIPAA, etc.)",
          "Reputational damage"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Apply authentication middleware to ALL endpoints by default",
            "effort": "low",
            "effectiveness": "Eliminates risk",
            "implementation_phase": "architecture",
            "status": "approved"
          },
          {
            "strategy": "Security testing in pre-deployment validation (D-07)",
            "effort": "low",
            "effectiveness": "Catch misconfigurations before production",
            "implementation_phase": "testing",
            "status": "approved"
          }
        ],
        "residual_risk": {
          "likelihood": 1,
          "impact": 5,
          "risk_score": 5,
          "acceptable": true
        },
        "owner": "SECURITY_LEAD",
        "target_resolution_date": "Before development starts",
        "compliance_requirements": ["GDPR", "HIPAA", "PCI-DSS"]
      }
    ]
  },

  "data_risks": {
    "description": "Risks related to data integrity, consistency, backup, and privacy",
    "risks": [
      {
        "risk_id": "DATA-001",
        "category": "data",
        "subcategory": "CHOOSE: integrity | consistency | backup | recovery | privacy | migration",
        "title": "EXAMPLE: No database backup strategy",
        "description": "Production database has no automated backups, risking data loss",
        "likelihood": 2,
        "impact": 5,
        "risk_score": 10,
        "risk_level": "MEDIUM",
        "triggers": [
          "Hardware failure",
          "Data corruption",
          "Accidental deletion"
        ],
        "consequences": [
          "Complete data loss",
          "Business continuity failure",
          "Cannot meet RPO requirements"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Implement automated daily backups with 30-day retention",
            "effort": "low",
            "effectiveness": "Meets RPO of 24 hours",
            "implementation_phase": "deployment",
            "status": "approved"
          },
          {
            "strategy": "Enable point-in-time recovery (PITR)",
            "effort": "medium",
            "effectiveness": "Improves RPO to 5 minutes",
            "implementation_phase": "deployment",
            "status": "future_consideration"
          }
        ],
        "residual_risk": {
          "likelihood": 1,
          "impact": 3,
          "risk_score": 3,
          "acceptable": true
        },
        "owner": "DATABASE_ADMIN",
        "rpo_target": "24 hours",
        "rto_target": "4 hours"
      }
    ]
  },

  "integration_risks": {
    "description": "Risks related to external dependencies, APIs, and third-party services",
    "risks": [
      {
        "risk_id": "INT-001",
        "category": "integration",
        "subcategory": "CHOOSE: external_api | third_party_service | network | protocol | version_compatibility",
        "title": "EXAMPLE: Dependency on external API with no SLA",
        "description": "Service depends on external weather API that has no availability guarantees",
        "likelihood": 3,
        "impact": 3,
        "risk_score": 9,
        "risk_level": "MEDIUM",
        "triggers": [
          "External API downtime",
          "API rate limiting",
          "Breaking API changes"
        ],
        "consequences": [
          "Service functionality degraded",
          "User-facing errors",
          "Cannot meet availability SLA"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Implement caching layer for API responses",
            "effort": "medium",
            "effectiveness": "Reduces impact, service works with stale data",
            "implementation_phase": "development",
            "status": "approved"
          },
          {
            "strategy": "Graceful degradation - disable feature if API unavailable",
            "effort": "low",
            "effectiveness": "Maintains core functionality",
            "implementation_phase": "development",
            "status": "approved"
          },
          {
            "strategy": "Identify backup API provider",
            "effort": "high",
            "effectiveness": "Eliminates single point of failure",
            "implementation_phase": "architecture",
            "status": "future_consideration"
          }
        ],
        "residual_risk": {
          "likelihood": 2,
          "impact": 2,
          "risk_score": 4,
          "acceptable": true
        },
        "owner": "INTEGRATION_LEAD",
        "external_dependency": "weather-api.com",
        "sla_required": false
      }
    ]
  },

  "compliance_risks": {
    "description": "Risks related to regulatory compliance, legal requirements, and industry standards",
    "risks": [
      {
        "risk_id": "COMP-001",
        "category": "compliance",
        "subcategory": "CHOOSE: gdpr | hipaa | pci_dss | sox | iso27001 | industry_standard",
        "title": "EXAMPLE: PII stored without encryption at rest",
        "description": "User email addresses and phone numbers stored in plaintext in database",
        "likelihood": 5,
        "impact": 5,
        "risk_score": 25,
        "risk_level": "CRITICAL",
        "triggers": [
          "Data breach",
          "Compliance audit",
          "User complaint"
        ],
        "consequences": [
          "GDPR violations (€20M or 4% revenue fine)",
          "Legal action",
          "Reputational damage",
          "Cannot operate in EU"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Enable database encryption at rest (AES-256)",
            "effort": "low",
            "effectiveness": "Meets compliance requirements",
            "implementation_phase": "deployment",
            "status": "must_implement"
          },
          {
            "strategy": "Implement field-level encryption for PII",
            "effort": "medium",
            "effectiveness": "Additional layer of protection",
            "implementation_phase": "development",
            "status": "must_implement"
          },
          {
            "strategy": "Data retention policy with automatic deletion after 90 days",
            "effort": "medium",
            "effectiveness": "Reduces exposure window",
            "implementation_phase": "development",
            "status": "approved"
          }
        ],
        "residual_risk": {
          "likelihood": 1,
          "impact": 5,
          "risk_score": 5,
          "acceptable": true
        },
        "owner": "COMPLIANCE_OFFICER",
        "regulatory_requirements": ["GDPR Article 32", "CCPA"],
        "audit_frequency": "Annual",
        "must_implement_before_deployment": true
      }
    ]
  },

  "business_risks": {
    "description": "Risks related to business objectives, user adoption, and market factors",
    "risks": [
      {
        "risk_id": "BIZ-001",
        "category": "business",
        "subcategory": "CHOOSE: adoption | market_timing | cost_overrun | resource_availability | scope_creep",
        "title": "EXAMPLE: Complex user interface may reduce adoption",
        "description": "Service API is complex with steep learning curve for developers",
        "likelihood": 3,
        "impact": 3,
        "risk_score": 9,
        "risk_level": "MEDIUM",
        "triggers": [
          "Developer feedback indicates confusion",
          "Low API usage after launch",
          "High support ticket volume"
        ],
        "consequences": [
          "Poor developer adoption",
          "Business objectives not met",
          "Need to redesign API (costly)"
        ],
        "mitigation_strategies": [
          {
            "strategy": "Simplify API design with sensible defaults",
            "effort": "medium",
            "effectiveness": "Improves developer experience",
            "implementation_phase": "architecture",
            "status": "approved"
          },
          {
            "strategy": "Create comprehensive documentation with examples",
            "effort": "low",
            "effectiveness": "Reduces learning curve",
            "implementation_phase": "development",
            "status": "approved"
          },
          {
            "strategy": "User testing with sample developers before launch",
            "effort": "low",
            "effectiveness": "Validates usability",
            "implementation_phase": "testing",
            "status": "approved"
          }
        ],
        "residual_risk": {
          "likelihood": 2,
          "impact": 2,
          "risk_score": 4,
          "acceptable": true
        },
        "owner": "PRODUCT_MANAGER",
        "business_objective": "Achieve 1000 API calls/day within 3 months of launch"
      }
    ]
  },

  "risk_summary": {
    "total_risks_identified": 0,
    "risk_distribution": {
      "critical": 0,
      "high": 0,
      "medium": 0,
      "low": 0
    },
    "risks_by_category": {
      "architectural": 0,
      "technical": 0,
      "operational": 0,
      "security": 0,
      "data": 0,
      "integration": 0,
      "compliance": 0,
      "business": 0
    },
    "mitigation_status": {
      "must_implement": 0,
      "approved": 0,
      "in_progress": 0,
      "completed": 0,
      "proposed": 0,
      "rejected": 0
    },
    "overall_risk_profile": "CALCULATE: critical_count * 4 + high_count * 3 + medium_count * 2 + low_count * 1",
    "acceptable_for_deployment": false,
    "blockers": [
      "List all CRITICAL or must_implement risks that block deployment"
    ]
  },

  "risk_monitoring": {
    "review_frequency": "Weekly during development, Monthly in production",
    "risk_owner_responsibilities": [
      "Monitor risk triggers",
      "Update mitigation status",
      "Escalate if risk materializes",
      "Report on residual risk"
    ],
    "escalation_criteria": [
      "New CRITICAL risk identified",
      "Risk score increases by >5 points",
      "Mitigation strategy fails"
    ]
  },

  "notes": [
    "This document is created during SE-02-A04 (architecture design phase)",
    "Risk assessment informs architecture decisions and testing priorities",
    "High/Critical risks should have mitigation strategies implemented during development",
    "Update this document as architecture evolves and new risks are identified",
    "Reference this during D-07 pre-deployment validation to verify risks are mitigated"
  ]
}
