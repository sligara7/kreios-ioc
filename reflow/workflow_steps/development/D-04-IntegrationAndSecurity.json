{
  "workflow_metadata": {
    "version": "0.1.0",
    "name": "Dev-04 Integration Surfaces & Security Hardening",
    "based_on": "service_development_workflow.json D5â€“D6",
    "description": "Implement integrations per interface contracts and harden security/compliance."
  },
  "entry_conditions": {
    "from": "Dev-03",
    "artifacts": ["specs/machine/service_arch/<service>/service_architecture.json", "specs/machine/service_arch/<service>/api_contracts.json"]
  },
  "steps": [
    { "id": "D5.1", "description": "Enumerate external dependencies from service_architecture.json", "tool": "manual" },
    { "id": "D5.2", "description": "Implement client adapters / message producers per ICDs", "tool": "manual" },
    { "id": "D5.3", "description": "Add retries/circuit breakers/timeouts per resiliency policies", "tool": "manual" },
    { "id": "D5.4", "description": "Create contract tests verifying shape & error conditions", "tool": "manual" },
    { "id": "D6.1", "description": "Map compliance requirements to code artifacts", "tool": "manual" },
    { "id": "D6.2", "description": "Add input sanitization, quotas, permission scopes", "tool": "manual" },
    { "id": "D6.3", "description": "Integrate audit/event logging for security actions", "tool": "manual" },
    { "id": "D6.4", "description": "Run static analysis & dependency vulnerability scans", "tool": "bash" }
  ],
  "artifact_routing": {
    "code": "code/<service>/",
    "tests": "code/<service>/tests/",
    "machine_specs": "specs/machine/service_arch/<service>/",
    "context": "context/*"
  },
  "iteration_paths": {
    "on_contract_change": "../feature_update/FU-02-ArchReengineering.json",
    "on_security_policy_change": "../feature_update/FU-02-ArchReengineering.json"
  },
  "validation": {
    "exit_criteria": ["All dependencies callable/messaged", "Contract tests pass", "Security baseline enforced"]
  },
  "handoff": {
    "produces": ["code/<service>/", "contract tests", "security scan reports"],
    "next_workflow": "../development/Dev-05-ObservabilityAndTesting.json"
  }
}